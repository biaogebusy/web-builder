<div class="layout-builder position-relative" *ngIf="content" [ngClass]="content.classes">
  <a class="anchor" *ngIf="content.id" [id]="content.id"></a>
  <app-spacer [size]="content?.spacer || 'md'"></app-spacer>
  <app-bg-img [attr.data-path]="'bg'" [content]="content.bg" *ngIf="content.bg"></app-bg-img>
  <div class="{{content.fullWidth?'':'container'}}" *ngIf="content">
    <div class="inner layout-inner" id="layout" [fxLayout]="content.direction" [fxLayoutAlign]="content.layoutAlign"
      [fxLayoutGap.xs]="content.gap?.xs+'px'" [fxLayoutGap.sm]="content.gap?.sm+'px'"
      [fxLayoutGap.md]="content.gap?.md+'px'" [fxLayoutGap.lg]="content.gap?.lg+'px'"
      [fxLayoutGap.gt-lg]="content.gap?.lg+'px'">
      <div class="layout layout-{{i}}" [ngClass]="layout.classes" *ngFor="let layout of content.elements;index as i"
        [attr.data-path]="'elements.'+i" [ngClass]="layout.classes"
        fxFlex.xs="0 0 calc(100% / {{12 / layout.row.xs}} - {{content.gap?.xs+'px'||'0px'}})"
        fxFlex.sm="0 0 calc(100% / {{12 / layout.row.sm}} - {{content.gap?.sm+'px'||'0px'}})"
        fxFlex.md="0 0 calc(100% / {{12 / layout.row.md}} - {{content.gap?.md+'px'||'0px'}})"
        fxFlex.lg="0 0 calc(100% / {{12 / layout.row.lg}} - {{content.gap?.lg+'px'||'0px'}})"
        fxFlex.gt-lg="0 0 calc(100% / {{12 / layout.row.lg}} - {{content.gap?.lg+'px'||'0px'}})">
        <ng-container *ngIf="isBuilderMode$ | async">
          <app-layout-toolbar [content]="content" [i]="i" [layout]="layout"
            [pageIndex]="pageIndex"></app-layout-toolbar>
          <div class="placeholder" [attr.data-path]="'elements.'+i" fxFill fxLayoutAlign="center center"
            *ngIf="layout.elements.length === 0">
            <app-btn matTooltip="插入组件" (click)="addBlock('widget',content,$event)"
              [content]="{label:'', mode: 'icon',icon:{svg:'plus' } }"></app-btn>
          </div>
        </ng-container>
        <div class="for-animate">
          <div class="block" [fxLayout]="layout.direction" [fxLayoutAlign]="layout.layoutAlign"
            [ngStyle]="layout.style">
            <app-bg-img [attr.data-path]="'bg'" [content]="layout.bg" *ngIf="layout.bg"></app-bg-img>
            <div class="item item-{{item.type}}" [attr.data-path]="'elements.'+index"
              *ngFor="let item of layout.elements;index as index">
              <app-block-toolbar [layout]="layout" [item]="item" [index]="index" [i]="i" [content]="content"
                [pageIndex]="pageIndex" *ngIf="isBuilderMode$ | async"></app-block-toolbar>
              <app-dynamic-component [inputs]="item"></app-dynamic-component>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <app-spacer [size]="content?.spacer || 'md'"></app-spacer>
</div>