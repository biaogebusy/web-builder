<div class="builder-sidebar">
  @if (branding$ | async; as branding) {
    <a [routerLink]="branding.header.logo?.href" class="logo">
      <app-logo [content]="branding.header.logo" [isInvert]="true"></app-logo>
    </a>
  }
  <mat-divider></mat-divider>
  <div class="menu">
    @if (builderConfig$ | async; as config) {
      @if (config.menu) {
        @for (item of config.menu; track $index) {
          <div
            class="item"
            [routerLinkActive]="['active']"
            [routerLinkActiveOptions]="{ exact: true }"
            [matTooltip]="item.label"
            [matTooltipDisabled]="item.child ? true : false"
            matTooltipPosition="right"
          >
            <app-icon [routerLink]="item.href" [content]="item.icon"></app-icon>
            @if (item.child) {
              <div class="child">
                <div class="hover-menu">
                  <div class="title">{{ item.label }}</div>
                  <div class="child-menu">
                    <mat-list>
                      @for (item of item.child; track $index) {
                        <a
                          mat-list-item
                          [routerLink]="item.href"
                          [routerLinkActive]="['active']"
                          [routerLinkActiveOptions]="{ exact: true }"
                        >
                          @if (item.icon) {
                            <app-icon
                              class="h-[20px] w-[20px] leading-none"
                              [content]="item.icon"
                            ></app-icon>
                          }
                          {{ item.label }}
                        </a>
                      }
                    </mat-list>
                  </div>
                </div>
              </div>
            }
          </div>
        }
      }
    }
  </div>
  <div class="bottom">
    @if (branding$ | async; as branding) {
      <app-btn
        [matTooltip]="'媒体库'"
        [matTooltipPosition]="'right'"
        (click)="onSelectAssets()"
        [content]="{
          label: '',
          mode: 'icon',
          icon: { svg: 'image-search-outline' },
        }"
      ></app-btn>
      <app-btn
        [matTooltip]="
          (builder.showBranding$ | async) ? '隐藏页头页尾' : '显示页头页尾'
        "
        [matTooltipPosition]="'right'"
        (click)="onShowBranding()"
        [content]="{
          label: '',
          color: (builder.showBranding$ | async) ? 'primary' : undefined,
          mode: 'icon',
          icon: {
            svg:
              (builder.showBranding$ | async)
                ? 'page-layout-header-footer'
                : 'page-layout-body',
          },
        }"
      ></app-btn>
      @if (builder.themeMode | async; as mode) {
        <app-btn
          [matTooltip]="mode === 'light' ? '切换暗黑风格' : '切换浅色风格'"
          [matTooltipPosition]="'right'"
          (click)="onToggleBuilderTheme(mode)"
          [content]="{
            label: '',
            mode: 'icon',
            icon: {
              svg:
                mode === 'light'
                  ? 'white-balance-sunny'
                  : 'moon-waning-crescent',
            },
          }"
        ></app-btn>
      }
      <mat-divider></mat-divider>
      @if (branding.header.params.userInfo) {
        <app-user-menu [content]="branding.header.userMenu"></app-user-menu>
      }
    }
  </div>
</div>
