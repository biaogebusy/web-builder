<div class="view-map position-relation" *ngIf="content">
  <div class="sidebar p-x-sm p-y-sm" fxFlex.lt-md="100" fxFlex.gt-sm="500px" fxLayout="column">
    <div class="sidebar-wrapper" *ngIf="lists">
      <mat-expansion-panel [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <div class="view-map-header position-relative">
              <div class="result p-y-xs">总计 <span class="result-total">{{lists?.length}}</span> 条数据
              </div>
            </div>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <cdk-virtual-scroll-viewport [itemSize]="5" class="viewport">
          <div class="filter" *ngIf="content.form">
            <app-formly [classes]="'form-field-width-auto'" [form]="form" [fields]="content.form" [model]="model"
              (modelChange)="onModelChange($event)">
            </app-formly>

            <div class="actions" fxLayoutGap="1rem" fxLayoutAlign="end center">
              <button mat-button (click)="clear()">
                <mat-icon>clear</mat-icon>清空
              </button>
            </div>
          </div>
          <mat-divider class="m-y-sm"></mat-divider>
          <div class="list m-y-sm p-y-xs m-x-xs p-x-xs" [class.selected]="i == selectedId" matRipple
            [matRippleColor]="'rgba(0, 0, 0, 0.04)'" *cdkVirtualFor="let item of lists; index as i" fxLayout="row"
            (click)="onCard(item, i)">
            <div class="media">
              <img [src]="item.img" [alt]="item.title">
            </div>
            <div class="content" fxLayout="column" fxFlex="auto">
              <div class="head" fxLayout="row wrap">
                <div class="title bold m-bottom-0 ">{{item.title}}</div>
                <div class="badge" [innerHTML]="item.badge_1"></div>
              </div>
              <div class="inner" fxLayout="row" fxLayoutAlign="space-between end">
                <div class="left">
                  <div class="title sub-title one-line">{{item.subTitle}}</div>
                  <div class="badge" [innerHTML]="item.badge_2"></div>
                </div>
                <div class="meta text-right">
                  <div class="item one-line" [innerHTML]="item.meta_1"></div>
                  <div class="item one-line" [innerHTML]="item.meta_2"></div>
                </div>
              </div>
            </div>
          </div>
        </cdk-virtual-scroll-viewport>
      </mat-expansion-panel>
    </div>
  </div>
  <div class="map-wrapper">
    <app-map fxFlex="100%" [content]="{city: content.params.city, elements: lists}"></app-map>
  </div>
</div>
