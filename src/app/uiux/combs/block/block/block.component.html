<div class="block" *ngIf="pageContent$ | async as page">
  <mat-drawer-container (backdropClick)="onBackdrop()">
    <mat-drawer-content>
      <div *ngTemplateOutlet="block; context: {content:page.body}"></div>
    </mat-drawer-content>
    <mat-drawer (openedChange)="onDrawer()" class="drawer-right" [mode]="'over'" [opened]="opened" position="end">
      <div class="drawer-loading" *ngIf="drawerLoading">
        <mat-spinner diameter="50" color="accent"></mat-spinner>
      </div>
      <ng-container *ngIf="!drawerLoading && opened">
        <div *ngTemplateOutlet="block; context: {content:drawerContent?.body,isDrawer:true}; "></div>
      </ng-container>
    </mat-drawer>
  </mat-drawer-container>
</div>

<ng-template let-content="content" let-isDrawer="isDrawer" #block>
  <ng-container *ngFor="let item of content;index as i; trackBy: trackByFn">
    <app-dynamic-component [inputs]="item" [index]="i" [isDrawer]="isDrawer"></app-dynamic-component>
  </ng-container>
</ng-template>