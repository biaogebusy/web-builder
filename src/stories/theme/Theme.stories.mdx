import { Meta, ColorPalette, ColorItem } from "@storybook/addon-docs";

<Meta
  title="主题/主题颜色"
  id="themeConfig"
  parameters={{
    viewMode: "docs",
    previewTabs: {
      canvas: { hidden: true },
    },
    layout: "fullscreen",
  }}
/>

# 介绍

![theme](/assets/storybook/assets/theme.png)
信使默认配置了：

- 浅色主题（默认）
- 暗黑主题
- 粉色主题
- 蓝色主题
- 绿色主题

在主题配置文件 `src/theme/theme.scss` 中可查看并根据项目情况删除或者添加主题，我们推荐严格按照此方式来添加主题，即不会在具体的组件中写相关的颜色信息，而是在 theme 中根据变量严格设置，才能够保证组件统一颜色。

### 浅色主题颜色配置

<ColorPalette>
<ColorItem
    title="主题色"
    subtitle="颜色"
    colors={{
      '文本': "rgba(0,0,0,.75)",
      '主色 Primary': "#613bfa",
      '强调色 Accent': "#613bfa",
      '警告色 Wran': "#ff5252"
    }}
  />

<ColorItem
  title="主题 color"
  subtitle=".text-*"
  colors={{
    primary: "#613bfa",
    accent: "#613bfa",
    warn: "#ff5252",
  }}
/>

<ColorItem
  title="常用 color"
  subtitle=".text-*"
  colors={{
    pink: "#c2185b",
    orange: "#e65100",
    yellow: "#f57f17",
    red: "#d32f2f",
    purple: "#512da8",
    indigo: "#303f9f",
    blue: "#1976d2",
    cyan: "#006064",
    teal: "#004d40",
    green: "#1b5e20",
    brown: "#5d4037",
    grey: "#9e9e9e",
  }}
/>

<ColorItem
  title="主色级别"
  subtitle="颜色值"
  colors={{
    50: "#efe8fe",
    100: "#d5c7fd",
    200: "#b9a2fd",
    300: "#9a7afd",
    400: "#7f5afc",
    500: "#613bfa",
    600: "#5336f3",
    700: "#3c2eea",
    800: "#1c28e5",
    900: "#0019dd",
  }}
/>
<ColorItem
  title="强调色级别"
  subtitle="颜色值"
  colors={{
    A100: "#764ef8",
    A200: "#532af5",
    A400: "#4326ef",
    A700: "#251ee7",
  }}
/>

<ColorItem
  title="常用背景色"
  subtitle=".bg-*"
  colors={{
    pink: "#c2185b",
    orange: "#e65100",
    yellow: "#f57f17",
    red: "#d32f2f",
    purple: "#512da8",
    indigo: "#303f9f",
    blue: "#1976d2",
    cyan: "#006064",
    teal: "#004d40",
    green: "#1b5e20",
    brown: "#5d4037",
    grey: "#9e9e9e",
  }}
/>

</ColorPalette>

### 如何新建主题

1. 复制以下示例新建主题配置文件：`_xxx-config.scss` 在`src/theme/theme-config`文件夹中;

```sass
@import "~@angular/material/theming";
$yourTheme-color: (
  //
  50: #e7e9ff,
  100: #c2c8fe,
  200: #96a4fe,
  300: #6280ff,
  400: #2962ff,
  500: #0044fc,
  600: #003bf0,
  700: #002fe3,
  800: #0022d9,
  900: #0001c0,
  A100: #c2c8fe,
  A200: #96a4fe,
  A400: #2962ff,
  A700: #002fe3,
  contrast: (
    //
    50: $dark-primary-text,
    100: $dark-primary-text,
    200: $dark-primary-text,
    300: $light-primary-text,
    400: $light-primary-text,
    500: $light-primary-text,
    600: $light-primary-text,
    700: $light-primary-text,
    800: $light-primary-text,
    900: $light-primary-text,
    A100: $dark-primary-text,
    A200: $light-primary-text,
    A400: $light-primary-text,
    A700: $light-primary-text
  )
);

// user material mat blue
$yourTheme-primary: mat-palette($yourTheme-color, 400);
$yourTheme-accent: mat-palette($yourTheme-color, A400);
$yourTheme-warn: mat-palette($mat-red, A200, A100, A400);
$yourTheme-theme: mat-light-theme($yourTheme-primary, $yourTheme-accent, $yourTheme-warn);
```

2. 使用 Material 主题[调色板生成器](https://material.io/design/color/the-color-system.html#tools-for-picking-colors)生成并更新主题颜色值;
   ![tool](/assets/storybook/assets/tool.png)
3. 导入到入口文件：`src/theme/theme-config/_theme-config.scss`;
4. 在主题入口文件添加对应的 class:

```css
.yourTheme-theme {
  @include angular-material-theme($green-theme);
  @include base-colors($green-theme);
  @include component-theme($green-theme);
}
```

5. 在 base.json（src/assets/app/core/base.json）配置文件中，添加新的主题：

```json
"theme": [{
    "name": "默认主题",
    "style": "light-theme",
    "icon": "laptop_mac"
  }, {
    "name": "Pink 主题",
    "style": "pink-theme",
    "icon": "laptop_mac"
  }, {
    "name": "Blue 主题",
    "style": "blue-theme",
    "icon": "laptop_mac"
  }, {
    "name": "Green 主题",
    "style": "green-theme",
    "icon": "laptop_mac"
  }, {
    "name": "Red 主题",
    "style": "red-theme",
    "icon": "laptop_mac"
  }, {
    "name": "King 主题",
    "style": "king-theme",
    "icon": "laptop_mac"
  }, {
    "name": "暗黑主题",
    "style": "dark-theme",
    "svgIcon": "dark_mode"
  }]
```

6. 当组件需要配置颜色时，可在 `src/theme/component`中新建对应的该组件的配置文件，参考里面的写法即可，并导入到入口文件：`src/theme/component/_component.scss`

7. 最佳实践

```scss
@import "~@angular/material/theming";

@mixin hero-color($config-or-theme) {
  $config: mat-get-color-config($config-or-theme);
  $foreground: map-get($config, foreground);
  $background: map-get($config, background);
  $primary: map-get($config, primary);
  $accent: map-get($config, accent);
  $warn: map-get($config, warn);

  $bg-card-color: mat-color($background, card);
  .hero-1-v2 {
    .title {
      color: mat-color($primary, default-contrast);
    }
  }
  .hero-2-v2 {
    .box {
      background-color: $bg-card-color;
      @include mat-elevation(4, mat-color($foreground, text), 0.2);
      .content {
        color: mat-color($foreground, text, 0.5);
      }
    }
  }

  .hero-2-v3 {
    background-color: mat-color($primary);
    color: mat-color($primary, default-contrast);
    .card {
      background-color: $bg-card-color;
      @include mat-elevation(4, mat-color($foreground, text), 0.2);
      .card-media {
        @include mat-elevation(5, mat-color($foreground, text), 0.3);
      }
    }
  }
}
```

以上是 hero 组件的颜色样式代码，所有的颜色应该从以下读取，才能够保证颜色的统一：

- $foreground: 前景色
- $background: 背景色
- $primary: 主色
- $accent: 强调色
- $warn: 警告色

使用 mat-color(palette,hue: default, $opacity: null) :从调色盘获取特定的颜色，可以指定色调和透明度。

```
@import "~@angular/material/theming";

@mixin hero-color($config-or-theme) {
  $config: mat-get-color-config($config-or-theme);
  $foreground: map-get($config, foreground);
  $background: map-get($config, background);
  $primary: map-get($config, primary);
  $accent: map-get($config, accent);
  $warn: map-get($config, warn);

  .hero-1-v2 {
  // 获取默认色调
  color: mat-color($primary);

  // 获取指定色调
  background-color: mat-color($accent, 300);

  // 获取相对色调 ('lighter' or 'darker')
  outline-color: mat-color($accent, lighter);

  // 添加 `-contrast` 获取指定色盘的对比度颜色
  border-color: mat-color($primary, '100-contrast');
  }
}
```

### 前景色调色盘

```scss
$mat-light-theme-foreground: (
  base: black,
  divider: $dark-dividers,
  dividers: $dark-dividers,
  disabled: $dark-disabled-text,
  disabled-button: rgba(black, 0.26),
  disabled-text: $dark-disabled-text,
  elevation: black,
  hint-text: $dark-disabled-text,
  secondary-text: $dark-secondary-text,
  icon: rgba(black, 0.54),
  icons: rgba(black, 0.54),
  text: rgba(black, 0.87),
  slider-min: rgba(black, 0.87),
  slider-off: rgba(black, 0.26),
  slider-off-active: rgba(black, 0.38),
);

$mat-dark-theme-foreground: (
  base: white,
  divider: $light-dividers,
  dividers: $light-dividers,
  disabled: $light-disabled-text,
  disabled-button: rgba(white, 0.3),
  disabled-text: $light-disabled-text,
  elevation: black,
  hint-text: $light-disabled-text,
  secondary-text: $light-secondary-text,
  icon: white,
  icons: white,
  text: white,
  slider-min: white,
  slider-off: rgba(white, 0.3),
  slider-off-active: rgba(white, 0.3),
);
```

### 背景色调色盘

```scss
$mat-light-theme-background: (
  status-bar: map-get($mat-grey, 300),
  app-bar: map-get($mat-grey, 100),
  background: map-get($mat-grey, 50),
  hover: rgba(black, 0.04),
  card: white,
  dialog: white,
  disabled-button: rgba(black, 0.12),
  raised-button: white,
  focused-button: $dark-focused,
  selected-button: map-get($mat-grey, 300),
  selected-disabled-button: map-get($mat-grey, 400),
  disabled-button-toggle: map-get($mat-grey, 200),
  unselected-chip: map-get($mat-grey, 300),
  disabled-list-option: map-get($mat-grey, 200),
  tooltip: map-get($mat-grey, 700),
);

$mat-dark-theme-background: (
  status-bar: black,
  app-bar: map-get($mat-grey, 900),
  background: #303030,
  hover: rgba(white, 0.04),
  card: map-get($mat-grey, 800),
  dialog: map-get($mat-grey, 800),
  disabled-button: rgba(white, 0.12),
  raised-button: map-get($mat-grey, 800),
  focused-button: $light-focused,
  selected-button: map-get($mat-grey, 900),
  selected-disabled-button: map-get($mat-grey, 800),
  disabled-button-toggle: black,
  unselected-chip: map-get($mat-grey, 700),
  disabled-list-option: black,
  tooltip: map-get($mat-grey, 700),
);
```
